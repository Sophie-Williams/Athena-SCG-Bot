<html><head><title>PlayerTest.java</title></head>
<!-- HTMLized with the Beditor
     *c* Bryan Chadwick, 2003 -->
<style type='text/css'><!--
   .def{ color: #000000; }
   .grade{
      border: solid #FF0000 1px;
      background-color: #FFFF60;
   }
   .gcom{ font-weight: bold; background-color: #FFC0C0; }
   .com{ font-style: italic; color: #880000; }
   .keyw{ font-weight: bold; color: #000088; }
   .num{ color: #00AA00; }
   .func{ color: #BB7733; }
   .str{ color: #CC00AB; }
   .prim{ color: #0000FF; }
--></style>
<body><pre><span class="def">
</span><span class="keyw">import</span><span class="def"> edu.neu.ccs.demeterf.http.classes.HTTPReq;
</span><span class="keyw">import</span><span class="def"> edu.neu.ccs.demeterf.http.classes.HTTPResp;

</span><span class="keyw">import</span><span class="def"> java.io.FileInputStream;

</span><span class="keyw">import</span><span class="def"> player.PlayerServer;
</span><span class="keyw">import</span><span class="def"> scg.gen.PlayerContext;

</span><span class="com">/** A Little Player Test */</span><span class="def">
</span><span class="keyw">public</span><span class="def"> </span><span class="keyw">class</span><span class="def"> PlayerTest {

    </span><span class="com">/** Where the PlayerServer will be */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">final</span><span class="def"> </span><span class="prim">String</span><span class="def"> TEST_SERVER = </span><span class="str">"127.0.0.1"</span><span class="def">;

    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">void</span><span class="def"> </span><span class="func">pe</span><span class="def">(</span><span class="prim">String</span><span class="def"> s){ System.err.</span><span class="func">print</span><span class="def">(s); }
    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">void</span><span class="def"> </span><span class="func">p</span><span class="def">(</span><span class="prim">String</span><span class="def"> s){ System.out.</span><span class="func">print</span><span class="def">(s); }

    </span><span class="com">/** Simple Test Main */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">void</span><span class="def"> </span><span class="func">main</span><span class="def">(</span><span class="prim">String</span><span class="def">[] args) </span><span class="keyw">throws</span><span class="def"> Exception{
        </span><span class="keyw">if</span><span class="def"> (args.length != </span><span class="num">1</span><span class="def">) {
            </span><span class="func">pe</span><span class="def">(</span><span class="str">" ! Usage: java PlayerTest &lt;Context File&gt;\n"</span><span class="def">);
            </span><span class="keyw">return</span><span class="def">;
        }

        </span><span class="com">// Take a PlayerContext file from the command line</span><span class="def">
        </span><span class="prim">String</span><span class="def"> file =  args[</span><span class="num">0</span><span class="def">];
        </span><span class="com">//String file = "files/context.txt";</span><span class="def">
        
        </span><span class="com">// Parse the context, generate the corresponding request</span><span class="def">
        PlayerContext ctx = PlayerContext.</span><span class="func">parse</span><span class="def">(</span><span class="keyw">new</span><span class="def"> </span><span class="func">FileInputStream</span><span class="def">(file));
        </span><span class="com">// This request would usually come from the Administrator</span><span class="def">
        HTTPReq req = HTTPReq.</span><span class="func">Post</span><span class="def">(PlayerServer.EntryPath, ctx.</span><span class="func">toString</span><span class="def">());
        </span><span class="com">// See what the Player (currently waiting) does with the context</span><span class="def">
        HTTPResp res = req.</span><span class="func">send</span><span class="def">(TEST_SERVER, PlayerServer.DEFAULT_PORT);
        </span><span class="com">// Display the Player's transactions</span><span class="def">
        </span><span class="func">p</span><span class="def">(</span><span class="str">" Result: \n"</span><span class="def"> + res.</span><span class="func">getBody</span><span class="def">());
    }
}
</span></pre></body></html>