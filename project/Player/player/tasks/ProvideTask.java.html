<html><head><title>ProvideTask.java</title></head>
<!-- HTMLized with the Beditor
     *c* Bryan Chadwick, 2003 -->
<style type='text/css'><!--
   .def{ color: #000000; }
   .grade{
      border: solid #FF0000 1px;
      background-color: #FFFF60;
   }
   .gcom{ font-weight: bold; background-color: #FFC0C0; }
   .com{ font-style: italic; color: #880000; }
   .keyw{ font-weight: bold; color: #000088; }
   .num{ color: #00AA00; }
   .func{ color: #BB7733; }
   .str{ color: #CC00AB; }
   .prim{ color: #0000FF; }
--></style>
<body><pre><span class="def">
</span><span class="keyw">package</span><span class="def"> player.tasks;

</span><span class="keyw">import</span><span class="def"> logging.Logger;
</span><span class="keyw">import</span><span class="def"> scg.gen.*;
</span><span class="keyw">import</span><span class="def"> scg.Util;
</span><span class="keyw">import</span><span class="def"> edu.neu.ccs.demeterf.lib.*;

</span><span class="com">/** Provide Problem instances for accepted Challenges (offered by you) */</span><span class="def">
</span><span class="keyw">public</span><span class="def"> </span><span class="keyw">class</span><span class="def"> ProvideTask {
    </span><span class="com">/** Number of Vars and Clauses to use... */</span><span class="def">
    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">final</span><span class="def"> </span><span class="keyw">int</span><span class="def"> NUM_VARS = </span><span class="num">5</span><span class="def">;
    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">final</span><span class="def"> </span><span class="keyw">int</span><span class="def"> NUM_CLAUSES = </span><span class="num">10</span><span class="def">;
    
    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">final</span><span class="def"> Logger log;
    </span><span class="com">/** Create a ProvideTask with the given Logger */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="func">ProvideTask</span><span class="def">(Logger l){ log = l; }

    </span><span class="com">/** Do the actual providing of Problem instances */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> ProvideTrans </span><span class="func">provide</span><span class="def">(AcceptedChallenge ch){
        log.</span><span class="func">notify</span><span class="def">(</span><span class="str">"Providing : #"</span><span class="def">+ch.</span><span class="func">getKey</span><span class="def">());
        </span><span class="keyw">return</span><span class="def"> </span><span class="keyw">new</span><span class="def"> </span><span class="func">ProvideTrans</span><span class="def">(</span><span class="func">createProb</span><span class="def">(ch.</span><span class="func">getPred</span><span class="def">()), ch.</span><span class="func">getKey</span><span class="def">());
    }
    
    </span><span class="com">/** Static list of variables to draw from... */</span><span class="def">
    </span><span class="keyw">static</span><span class="def"> List&lt;Var&gt; vars = List.</span><span class="func">buildlist</span><span class="def">(</span><span class="keyw">new</span><span class="def"> List.Build&lt;Var&gt;(){
        </span><span class="keyw">public</span><span class="def"> Var </span><span class="func">build</span><span class="def">(</span><span class="keyw">int</span><span class="def"> i){
            </span><span class="keyw">return</span><span class="def"> </span><span class="keyw">new</span><span class="def"> </span><span class="func">Var</span><span class="def">(</span><span class="keyw">new</span><span class="def"> </span><span class="func">ident</span><span class="def">(</span><span class="str">"v"</span><span class="def">+i));
        }
    }, NUM_VARS);
    
    </span><span class="com">/** Create a random problem instance of the given ProblemType */</span><span class="def">
    Problem </span><span class="func">createProb</span><span class="def">(ProblemType t){
        </span><span class="keyw">final</span><span class="def"> List&lt;</span><span class="prim">Integer</span><span class="def">&gt; type = t.</span><span class="func">getType</span><span class="def">();
        </span><span class="keyw">return</span><span class="def"> </span><span class="keyw">new</span><span class="def"> </span><span class="func">Problem</span><span class="def">(vars, 
                List.</span><span class="func">buildlist</span><span class="def">(</span><span class="keyw">new</span><span class="def"> List.Build&lt;Clause&gt;(){
                    </span><span class="keyw">public</span><span class="def"> Clause </span><span class="func">build</span><span class="def">(</span><span class="keyw">int</span><span class="def"> i){
                        </span><span class="keyw">int</span><span class="def"> v = Util.</span><span class="func">random</span><span class="def">(vars.</span><span class="func">length</span><span class="def">());
                        </span><span class="keyw">return</span><span class="def"> </span><span class="keyw">new</span><span class="def"> </span><span class="func">Clause</span><span class="def">(type.</span><span class="func">lookup</span><span class="def">(Util.</span><span class="func">random</span><span class="def">(type.</span><span class="func">length</span><span class="def">())),
                                List.</span><span class="func">create</span><span class="def">(
                                        vars.</span><span class="func">lookup</span><span class="def">(v),
                                        vars.</span><span class="func">lookup</span><span class="def">((v+</span><span class="num">1</span><span class="def">)%vars.</span><span class="func">length</span><span class="def">()),
                                        vars.</span><span class="func">lookup</span><span class="def">((v+</span><span class="num">2</span><span class="def">)%vars.</span><span class="func">length</span><span class="def">())));
                    }
                }, NUM_CLAUSES));
    }
}
;</span></pre></body></html>