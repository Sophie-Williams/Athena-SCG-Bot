<html><head><title>LocalPlayerProxy.java</title></head>
<!-- HTMLized with the Beditor
     *c* Bryan Chadwick, 2003 -->
<style type='text/css'><!--
   .def{ color: #000000; }
   .grade{
      border: solid #FF0000 1px;
      background-color: #FFFF60;
   }
   .gcom{ font-weight: bold; background-color: #FFC0C0; }
   .com{ font-style: italic; color: #880000; }
   .keyw{ font-weight: bold; color: #000088; }
   .num{ color: #00AA00; }
   .func{ color: #BB7733; }
   .str{ color: #CC00AB; }
   .prim{ color: #0000FF; }
--></style>
<body><pre><span class="def">
</span><span class="keyw">package</span><span class="def"> scg.game;

</span><span class="keyw">import</span><span class="def"> java.lang.reflect.Method;

</span><span class="keyw">import</span><span class="def"> scg.gen.PlayerSpec;
</span><span class="keyw">import</span><span class="def"> edu.neu.ccs.demeterf.http.classes.HTTPReq;
</span><span class="keyw">import</span><span class="def"> edu.neu.ccs.demeterf.http.classes.HTTPResp;

</span><span class="keyw">public</span><span class="def"> </span><span class="keyw">class</span><span class="def"> LocalPlayerProxy </span><span class="keyw">extends</span><span class="def"> PlayerProxy </span><span class="keyw">implements</span><span class="def"> PlayerProxyI {

    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">final</span><span class="def"> </span><span class="prim">Object</span><span class="def"> player;
    </span><span class="keyw">private</span><span class="def"> Method method = </span><span class="keyw">null</span><span class="def">;

    </span><span class="keyw">public</span><span class="def"> </span><span class="func">LocalPlayerProxy</span><span class="def">(PlayerSpec spec, </span><span class="prim">Object</span><span class="def"> player) {
        </span><span class="keyw">super</span><span class="def">(spec);
        </span><span class="keyw">this</span><span class="def">.player = player;
        </span><span class="keyw">if</span><span class="def"> (player != </span><span class="keyw">null</span><span class="def">) {
            </span><span class="keyw">try</span><span class="def"> {
                </span><span class="keyw">this</span><span class="def">.method = player.</span><span class="func">getClass</span><span class="def">().</span><span class="func">getMethod</span><span class="def">(</span><span class="str">"playerResponse"</span><span class="def">, HTTPReq.</span><span class="keyw">class</span><span class="def">);
            } </span><span class="keyw">catch</span><span class="def"> (Exception e) {
                </span><span class="keyw">throw</span><span class="def"> </span><span class="keyw">new</span><span class="def"> </span><span class="func">RuntimeException</span><span class="def">(</span><span class="str">"incorrect player type"</span><span class="def">);
            }
        }

    }

    @Override
    </span><span class="keyw">public</span><span class="def"> HTTPResp </span><span class="func">contactPlayer</span><span class="def">(HTTPReq req) </span><span class="keyw">throws</span><span class="def"> Exception{
        </span><span class="keyw">if</span><span class="def"> (player != </span><span class="keyw">null</span><span class="def"> && method != </span><span class="keyw">null</span><span class="def">) {
            </span><span class="keyw">return</span><span class="def"> (HTTPResp) method.</span><span class="func">invoke</span><span class="def">(player, req);
        }
        </span><span class="keyw">throw</span><span class="def"> </span><span class="keyw">new</span><span class="def"> </span><span class="func">RuntimeException</span><span class="def">(</span><span class="str">"Player unable to take turn"</span><span class="def">);
    }
}
</span></pre></body></html>