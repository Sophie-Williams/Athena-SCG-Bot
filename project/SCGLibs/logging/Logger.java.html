<html><head><title>Logger.java</title></head>
<!-- HTMLized with the Beditor
     *c* Bryan Chadwick, 2003 -->
<style type='text/css'><!--
   .def{ color: #000000; }
   .grade{
      border: solid #FF0000 1px;
      background-color: #FFFF60;
   }
   .gcom{ font-weight: bold; background-color: #FFC0C0; }
   .com{ font-style: italic; color: #880000; }
   .keyw{ font-weight: bold; color: #000088; }
   .num{ color: #00AA00; }
   .func{ color: #BB7733; }
   .str{ color: #CC00AB; }
   .prim{ color: #0000FF; }
--></style>
<body><pre><span class="def">
</span><span class="keyw">package</span><span class="def"> logging;

</span><span class="keyw">import</span><span class="def"> java.io.*;
</span><span class="keyw">import</span><span class="def"> scg.Util;

</span><span class="com">/** Superclass of various Logging Objects */</span><span class="def">
</span><span class="keyw">public</span><span class="def"> </span><span class="keyw">abstract</span><span class="def"> </span><span class="keyw">class</span><span class="def"> Logger{
    </span><span class="com">/** Simple notifications, no Date/Stamp needed; returns the msg given. */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">abstract</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">notify</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg);
    </span><span class="com">/** Log an Error occurence; returns the msg given. */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">abstract</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">error</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg);
    </span><span class="com">/** Capture an event, by logging the Date and message; returns the msg given. */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">event</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg){
        </span><span class="keyw">return</span><span class="def"> </span><span class="func">notify</span><span class="def">(</span><span class="func">stamp</span><span class="def">()+msg);
    }
    </span><span class="com">/** Returns a Time/Date Stamp */</span><span class="def">
    </span><span class="keyw">protected</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">stamp</span><span class="def">(){ </span><span class="keyw">return</span><span class="def"> Util.</span><span class="func">printDate</span><span class="def">(Util.</span><span class="func">now</span><span class="def">()); }
    </span><span class="com">/** Shutdown this Logger */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">abstract</span><span class="def"> </span><span class="keyw">void</span><span class="def"> </span><span class="func">shutdown</span><span class="def">();
    
    </span><span class="com">/** Create a PlainText Logger out to the given File */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> Logger </span><span class="func">text</span><span class="def">(</span><span class="prim">String</span><span class="def"> file)</span><span class="keyw">throws</span><span class="def"> IOException{
        </span><span class="keyw">return</span><span class="def"> </span><span class="func">text</span><span class="def">(</span><span class="keyw">new</span><span class="def"> </span><span class="func">FileOutputStream</span><span class="def">(file));
    }
    </span><span class="com">/** Create a PlainText Logger out to the given OutputStream */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> Logger </span><span class="func">text</span><span class="def">(OutputStream strm){
        </span><span class="keyw">return</span><span class="def"> </span><span class="func">text</span><span class="def">(</span><span class="keyw">new</span><span class="def"> </span><span class="func">PrintStream</span><span class="def">(strm));
    }
    </span><span class="com">/** Create a PlainText Logger out to the given PrintStream */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> Logger </span><span class="func">text</span><span class="def">(PrintStream strm){
        </span><span class="keyw">return</span><span class="def"> </span><span class="keyw">new</span><span class="def"> </span><span class="func">PlainText</span><span class="def">(strm);
    }
    </span><span class="com">/** Create a PlainText Logger out to the given File */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> Logger </span><span class="func">text</span><span class="def">(OutputStream o, </span><span class="prim">String</span><span class="def"> file)</span><span class="keyw">throws</span><span class="def"> IOException{
        </span><span class="keyw">return</span><span class="def"> </span><span class="func">text</span><span class="def">(SplitStream.</span><span class="func">create</span><span class="def">(o, </span><span class="keyw">new</span><span class="def"> </span><span class="func">FileOutputStream</span><span class="def">(file)));
    }
    
    </span><span class="com">/** Create a HTML Logger out to the given File */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> Logger </span><span class="func">html</span><span class="def">(</span><span class="prim">String</span><span class="def"> file)</span><span class="keyw">throws</span><span class="def"> IOException{
        </span><span class="keyw">return</span><span class="def"> </span><span class="func">html</span><span class="def">(</span><span class="keyw">new</span><span class="def"> </span><span class="func">FileOutputStream</span><span class="def">(file));
    }
    </span><span class="com">/** Create a HTML Logger out to the given OutputStream */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> Logger </span><span class="func">html</span><span class="def">(OutputStream strm){
        </span><span class="keyw">return</span><span class="def"> </span><span class="func">html</span><span class="def">(</span><span class="keyw">new</span><span class="def"> </span><span class="func">PrintStream</span><span class="def">(strm));
    }
    </span><span class="com">/** Create a HTML Logger out to the given PrintStream */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> Logger </span><span class="func">html</span><span class="def">(PrintStream strm){
        </span><span class="keyw">return</span><span class="def"> </span><span class="keyw">new</span><span class="def"> </span><span class="func">HTMLText</span><span class="def">(strm);
    }
    </span><span class="com">/** Create a HTML Logger out to the given File */</span><span class="def">
    </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">static</span><span class="def"> Logger </span><span class="func">html</span><span class="def">(OutputStream o, </span><span class="prim">String</span><span class="def"> file)</span><span class="keyw">throws</span><span class="def"> IOException{
        </span><span class="keyw">return</span><span class="def"> </span><span class="func">html</span><span class="def">(SplitStream.</span><span class="func">create</span><span class="def">(o, </span><span class="keyw">new</span><span class="def"> </span><span class="func">FileOutputStream</span><span class="def">(file)));
    }
    
    </span><span class="com">/** General Output Logging to a Stream/File */</span><span class="def">
    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">abstract</span><span class="def"> </span><span class="keyw">class</span><span class="def"> OutputLogger </span><span class="keyw">extends</span><span class="def"> Logger{
        PrintStream out;
        </span><span class="func">OutputLogger</span><span class="def">(PrintStream strm){ out = strm; }
        
        </span><span class="keyw">void</span><span class="def"> </span><span class="func">log</span><span class="def">(</span><span class="prim">String</span><span class="def"> s){ out.</span><span class="func">print</span><span class="def">(s); }
        </span><span class="keyw">void</span><span class="def"> </span><span class="func">logln</span><span class="def">(</span><span class="prim">String</span><span class="def"> s){ out.</span><span class="func">println</span><span class="def">(s); }
        </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">void</span><span class="def"> </span><span class="func">shutdown</span><span class="def">(){ out.</span><span class="func">close</span><span class="def">(); }
    }
    
    </span><span class="com">/** Plain Text Output Logging */</span><span class="def">
    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">class</span><span class="def"> PlainText </span><span class="keyw">extends</span><span class="def"> OutputLogger{
        </span><span class="func">PlainText</span><span class="def">(PrintStream strm){
            </span><span class="keyw">super</span><span class="def">(strm);
            </span><span class="func">logln</span><span class="def">(</span><span class="str">"      ******* Log At: "</span><span class="def">+</span><span class="func">stamp</span><span class="def">()+</span><span class="str">" *******"</span><span class="def">);
        }
        </span><span class="keyw">public</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">error</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg){ </span><span class="func">logln</span><span class="def">(</span><span class="str">" !! "</span><span class="def">+msg); </span><span class="keyw">return</span><span class="def"> msg; }
        </span><span class="keyw">public</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">notify</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg){ </span><span class="func">logln</span><span class="def">(</span><span class="str">" -- "</span><span class="def">+msg); </span><span class="keyw">return</span><span class="def"> msg; }
        </span><span class="keyw">public</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">event</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg){ </span><span class="func">logln</span><span class="def">(</span><span class="str">" ** "</span><span class="def">+</span><span class="func">stamp</span><span class="def">()+</span><span class="str">" "</span><span class="def">+msg); </span><span class="keyw">return</span><span class="def"> msg; }
        </span><span class="keyw">protected</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">stamp</span><span class="def">(){ </span><span class="keyw">return</span><span class="def"> </span><span class="keyw">super</span><span class="def">.</span><span class="func">stamp</span><span class="def">()+</span><span class="str">":"</span><span class="def">; }
    }
    </span><span class="com">/** HTML Output Logging */</span><span class="def">
    </span><span class="keyw">private</span><span class="def"> </span><span class="keyw">static</span><span class="def"> </span><span class="keyw">class</span><span class="def"> HTMLText </span><span class="keyw">extends</span><span class="def"> OutputLogger{
        </span><span class="func">HTMLText</span><span class="def">(PrintStream strm){
            </span><span class="keyw">super</span><span class="def">(strm);
            </span><span class="func">logln</span><span class="def">(</span><span class="str">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Log At: "</span><span class="def">+</span><span class="func">stamp</span><span class="def">()+</span><span class="str">"&lt;/title&gt;&lt;/head&gt;"</span><span class="def">);
        }
        </span><span class="keyw">public</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">error</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg){ </span><span class="func">logln</span><span class="def">(</span><span class="str">" &lt;span color='</span><span class="def">red</span><span class="str">'&gt;!! "</span><span class="def">+msg+</span><span class="str">"&lt;/span&gt;&lt;br/&gt;"</span><span class="def">); </span><span class="keyw">return</span><span class="def"> msg; }
        </span><span class="keyw">public</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">notify</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg){ </span><span class="func">logln</span><span class="def">(</span><span class="str">" -- "</span><span class="def">+msg+</span><span class="str">"&lt;br/&gt;"</span><span class="def">); </span><span class="keyw">return</span><span class="def"> msg; }
        </span><span class="keyw">public</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">event</span><span class="def">(</span><span class="prim">String</span><span class="def"> msg){ </span><span class="func">logln</span><span class="def">(</span><span class="str">" &lt;span color='</span><span class="def">blue</span><span class="str">'&gt;** "</span><span class="def">+</span><span class="func">stamp</span><span class="def">()+</span><span class="str">": "</span><span class="def">+msg+</span><span class="str">"&lt;/span&gt;&lt;br/&gt;"</span><span class="def">); </span><span class="keyw">return</span><span class="def"> msg; }        
        </span><span class="keyw">protected</span><span class="def"> </span><span class="prim">String</span><span class="def"> </span><span class="func">stamp</span><span class="def">(){
            </span><span class="prim">String</span><span class="def"> s = </span><span class="keyw">super</span><span class="def">.</span><span class="func">stamp</span><span class="def">();
            </span><span class="func">log</span><span class="def">(</span><span class="str">" ** &lt;span color='</span><span class="def">green</span><span class="str">'&gt;"</span><span class="def">+s+</span><span class="str">"&lt;span&gt;"</span><span class="def">);
            </span><span class="keyw">return</span><span class="def"> s;
        }
        </span><span class="keyw">public</span><span class="def"> </span><span class="keyw">void</span><span class="def"> </span><span class="func">shutdown</span><span class="def">(){ out.</span><span class="func">println</span><span class="def">(</span><span class="str">"\n&lt;/body&gt;&lt;html&gt;"</span><span class="def">); </span><span class="keyw">super</span><span class="def">.</span><span class="func">shutdown</span><span class="def">(); }
    }
}
</span></pre></body></html>